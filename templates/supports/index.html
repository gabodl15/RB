{% extends 'layouts/app.html' %}

{% block 'content' %}
    <div class="row">
        <div class="col s12 m4">
            <h6>Soporte</h6>
        </div>
        <div class="col s12 m8">
            <span class="right"><a href="#" class="btn-flat">Agregar Soporte</a></span>
        </div>
    </div>
    <div class="divider"></div>
    <br>

    <div class="row">
        <div class="col s12 m4">
            {% if not missing_inspect %}
                <b><center>NO HAY INSPECCIONES</center></b>
            {% else %}
                <b><center>Inspecciones</center></b>
                {% for missing in missing_inspect %}
                    <div class="card">
                        <div class="card-content">
                            <span class="card-title">{{ missing }}</span>
                            <p>{{ missing }}</p>
                            {% if missing.last_name %}
                                <p>{{ missing.last_name }}</p>
                            {% endif %}
                            <p>{{ missing.inspect.address  }}</p>
                        </div>
                        <div class="card-action">
                            <!-- <a href="#supports" class="modal-trigger">VER</a> -->
                            <button class="btn btn-small blue" onclick="window.location='{% url 'supports.inspection.update' id=missing.id %}'" type="button" name="button">VER</button>
                            <button class="btn btn-small red right" type="button" name="button">Eliminar</button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        <div class="col s12 m4">
            {% if not missing_install %}
                <b><center>NO HAY INSTALACIONES</center></b>
            {% else %}
                <b><center>Instalaciones</center></b>
                {% for missing in missing_install %}
                    <div class="card">
                        <div class="card-content">
                            <span class="card-title">{{ missing }}</span>
                            <p>{{ missing }}</p>
                            {% if missing.last_name %}
                                <p>{{ missing.last_name }}</p>
                            {% endif %}
                            <p>{{ missing.inspect.address  }}</p>
                        </div>
                        <div class="card-action center">
                            <!-- <a href="#supports" class="modal-trigger">VER</a> -->
                            <button class="btn btn-small blue" type="button" name="button">Imprimir</button>
                            <button class="btn btn-small green" type="button" name="button">Factible</button>
                            <button class="btn btn-small red" type="button" name="button">Eliminar</button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        <div class="col s12 m4">
            {% if not missing_support %}
                <b><center>NO HAY SOPORTES</center></b>
            {% else %}
                <b><center>Soportes</center></b>
                {% for missing in missing_support %}
                    <div class="card">
                        <div class="card-content">
                            <span class="card-title">{{ missing }}</span>
                            <p>{{ missing }}</p>
                            {% if missing.last_name %}
                                <p>{{ missing.last_name }}</p>
                            {% endif %}
                            <p><b>Soporte:</b> {{ missing.support  }}</p>
                        </div>
                        <div class="card-action center">
                            <button class="btn btn-small blue" type="button" name="button">Imprimir</button>
                            <button class="btn btn-small green" type="button" name="button">Factible</button>
                            <button class="btn btn-small red" type="button" name="button">Eliminar</button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
    <!-- <p>Soportes por realizar: {{ missing_inspect | length}}</p>
    <div class="row">
        <div class="col m6">
            {% if supports %}
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">Soporte</span>
                        {{ supports|length }}
                    </div>
                    <div class="card-action">
                        <a href="#supports" class="modal-trigger">VER</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div> -->
    <!-- <div class="row">
        <div class="col s12 m6">
            {% if missing_inspect %}
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">INSPECCIONES</span>
                        {{ missing_inspect|length }}
                    </div>
                    <div class="card-action">
                        <a href="#inspection" class="modal-trigger">VER</a>
                    </div>
                </div>
                <div id="inspection" class="modal">
                    <div class="modal-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for missing in missing_inspect%}
                                    <tr>
                                        <td>{{ missing }}</td>
                                        <td class="right">
                                            <a href="{% url 'supports.inspection.update' id=missing.id %}" class="btn btn-small">VER</a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            {% endif %}
        </div>
        <div class="col s12 m6">
            {% if missing_install %}
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">INSTALACIONES</span> {{ missing_install|length }}
                    </div>
                    <div class="card-action">
                        <a class="modal-trigger" href="#installation">ver</a>
                    </div>
                </div>
                <div id="installation" class="modal">
                    <div class="modal-content">
                        <table>
                            <thead>
                                <tr>
                                    <th>Cliente</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for install in missing_install %}
                                    <tr>
                                        <td>{{ install }}</td>
                                        <td class="right"><a href="{% url 'supports.installation.show' id=install.id %}" class="btn btn-small">VER</a></td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            {% endif %}
        </div>
    </div> -->
{% endblock %}

{% block 'javascript' %}
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.modal');
        var instances = M.Modal.init(elems, {});
    });
</script>
{% endblock %}
